# Nova generators

Nova's DSL definition is built on top of the existing themes and styles. In the Android resource system, these are defined by the metadata in various files under [frameworks/base](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values) folder.

For example, the structure of the main theme object is defined by the metadata in [themes.xml](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/themes.xml) - simple attributes, text appearances, widget styles, dialog themes, etc.

In addition, the [public.xml](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/public.xml) file lists all attributes that are considered to be a part of the public API surface of Android themes and styles.

Nova uses these metadata pieces to define the structure of its DSL. This metadata is located in the [framework/generated](https://github.com/kirill-grouchnikov/nova/tree/master/core/src/main/kotlin/dev/android/playground/nova/core/framework/generated) source folder. The classes in that folder are generated by classe in the [generator](https://github.com/kirill-grouchnikov/nova/tree/master/generator/src/main/kotlin/dev/android/playground/nova/generator) source folder.

## Generating attribute metadata

The `AttrsCoreGenerator` class parses a local copy of the [public.xml](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/public.xml) file and generates the matching `CoreAttrs.kt` DSL metadata class. Pass the following two parameters to the main method of this generator:

* `publicXml` - full path (including the filename) to the local copy of the `public.xml` file
* `outputFolder` - full path for the location of the generated `CoreAttrs.xml`

## Generating styles and themes metadata

The `DslCoreGenerator` class uses manually created metadata files in the [framework/styleables](https://github.com/kirill-grouchnikov/nova/tree/master/core/src/main/kotlin/dev/android/playground/nova/core/framework/styleables) folder to generate the `CoreStyles.kt` and `CoreThemes.kt` DSL metadata classes. Pass the following two parameters to the main method of this generator:

* `mainOutputFolder` - full path for the location of the generated `CoreStyles.kt` and `CoreThemes.kt`
* `sampleOutputFolder` - full path for the location of the generated sample Nova snippet that shows basic usage of Nova DSL
